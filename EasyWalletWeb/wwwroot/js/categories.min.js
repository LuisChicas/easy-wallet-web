$(document).ready(function(){function r(t){var r=f(t),i;if(r.length>0){alert($("#tags-container").data("duplicated-message"));$("#tags-container").find("input").filter(function(n,i){return i.getAttribute("value")==t}).addClass("duplicated-tag");return}n.setCustomValidity("");i=$("#tags-container").find("li").length-1;$newTag=$("#tags-container").find(".tag-template").clone().removeClass("tag-template").addClass("tag-"+i).find("span").text(t).end().find("#new-tag-name-input").val(t).attr("name","Tags["+i+"].Name").end();$newTag.appendTo($("#tags-container"));$newTag.find("a").click(function(n){n.preventDefault();u(i)});$("#tags-input").val("");$("#add-tag-btn").prop("disabled",!0)}function u(n){$(".tag-"+n).find("#new-tag-name-input").val("").end().hide()}function f(n){return $tag=$("#tags-container").find("input").filter(function(t,i){return i.getAttribute("value")==n}).first()}var n,t,i;$("a[data-delete-message]").click(function(n){n.preventDefault();var t=$(this),i=t.data("delete-message");(!i||confirm(i))&&$("<form>").attr("method","post").attr("action",t.attr("href")).appendTo(document.body).submit()});$(".new-category-tag").not(".tag-template").find("a").each(function(n){$(this).click(function(t){t.preventDefault();u(n)})});n=document.getElementById("tags-input");t=$(".new-category-tag").not(".tag-template").length;n!=null&&t==0&&(i=$("#tags-input").data("empty-message"),n.setCustomValidity(i));$("#add-tag-btn").click(function(n){n.preventDefault();r($("#tags-input").val())});$("#tags-input").keyup(function(){$("#tags-input").val().trim().length>0?$("#add-tag-btn").prop("disabled",!1):$("#add-tag-btn").prop("disabled",!0)}).keydown(function(n){n.which==13&&(n.preventDefault(),r($("#tags-input").val()))})});